# 查询指标元数据<a name="ZH-CN_TOPIC_0143576778"></a>

## 功能介绍<a name="section66578044"></a>

查询指标的元数据信息。

## URI<a name="section62331491"></a>

-   URI格式

    GET /V1.0/\{project\_id\}/metadata

-   参数说明

    <a name="table23820074175412"></a>
    <table><thead align="left"><tr id="row17704405175412"><th class="cellrowborder" valign="top" width="25.281396231187557%" id="mcps1.1.3.1.1"><p id="p24770673175412"><a name="p24770673175412"></a><a name="p24770673175412"></a>名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="74.71860376881246%" id="mcps1.1.3.1.2"><p id="p49831152175412"><a name="p49831152175412"></a><a name="p49831152175412"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row9791522175412"><td class="cellrowborder" valign="top" width="25.281396231187557%" headers="mcps1.1.3.1.1 "><p id="p54915841175412"><a name="p54915841175412"></a><a name="p54915841175412"></a>project_id</p>
    </td>
    <td class="cellrowborder" valign="top" width="74.71860376881246%" headers="mcps1.1.3.1.2 "><p id="p62453732175412"><a name="p62453732175412"></a><a name="p62453732175412"></a>项目编号。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   以下列表为查询检索参数

    <a name="table35416756"></a>
    <table><thead align="left"><tr id="row27598891"><th class="cellrowborder" valign="top" width="21.292129212921292%" id="mcps1.1.5.1.1"><p id="p20917673"><a name="p20917673"></a><a name="p20917673"></a>名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="15.551555155515551%" id="mcps1.1.5.1.2"><p id="p16609919"><a name="p16609919"></a><a name="p16609919"></a>是否必选</p>
    </th>
    <th class="cellrowborder" valign="top" width="18.23182318231823%" id="mcps1.1.5.1.3"><p id="p3884242163044"><a name="p3884242163044"></a><a name="p3884242163044"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="44.92449244924492%" id="mcps1.1.5.1.4"><p id="p3226198"><a name="p3226198"></a><a name="p3226198"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row59995477"><td class="cellrowborder" valign="top" width="21.292129212921292%" headers="mcps1.1.5.1.1 "><p id="p27795493"><a name="p27795493"></a><a name="p27795493"></a>namespace</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.551555155515551%" headers="mcps1.1.5.1.2 "><p id="p92977379112"><a name="p92977379112"></a><a name="p92977379112"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="18.23182318231823%" headers="mcps1.1.5.1.3 "><p id="p46188171163044"><a name="p46188171163044"></a><a name="p46188171163044"></a>字符串</p>
    </td>
    <td class="cellrowborder" valign="top" width="44.92449244924492%" headers="mcps1.1.5.1.4 "><p id="p1529914911223"><a name="p1529914911223"></a><a name="p1529914911223"></a>指标命名空间，例如NAT网关的<a href="NAT网关监控指标说明.md#section172651386227">命名空间</a>。格式为service.item；service和item必须是字符串，必须以字母开头，只能包含0-9/a-z/A-Z/_，总长度最短为3，最大为32。</p>
    <p id="p156065911275"><a name="p156065911275"></a><a name="p156065911275"></a>目前只支持查询NAT网关的元数据。</p>
    </td>
    </tr>
    <tr id="row14620943"><td class="cellrowborder" valign="top" width="21.292129212921292%" headers="mcps1.1.5.1.1 "><p id="p43445707"><a name="p43445707"></a><a name="p43445707"></a>metric_name</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.551555155515551%" headers="mcps1.1.5.1.2 "><p id="p10966164010112"><a name="p10966164010112"></a><a name="p10966164010112"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="18.23182318231823%" headers="mcps1.1.5.1.3 "><p id="p50254369163044"><a name="p50254369163044"></a><a name="p50254369163044"></a>字符串</p>
    </td>
    <td class="cellrowborder" valign="top" width="44.92449244924492%" headers="mcps1.1.5.1.4 "><p id="p13210151410251"><a name="p13210151410251"></a><a name="p13210151410251"></a>指标名称，例如NAT网关的<a href="NAT网关监控指标说明.md#section18266133811225">监控指标</a>中的snat_connection。</p>
    </td>
    </tr>
    <tr id="row55056607"><td class="cellrowborder" valign="top" width="21.292129212921292%" headers="mcps1.1.5.1.1 "><p id="p30400195"><a name="p30400195"></a><a name="p30400195"></a>dim</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.551555155515551%" headers="mcps1.1.5.1.2 "><p id="p125871341914"><a name="p125871341914"></a><a name="p125871341914"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="18.23182318231823%" headers="mcps1.1.5.1.3 "><p id="p44072059163044"><a name="p44072059163044"></a><a name="p44072059163044"></a>字符串</p>
    </td>
    <td class="cellrowborder" valign="top" width="44.92449244924492%" headers="mcps1.1.5.1.4 "><p id="p19158445162638"><a name="p19158445162638"></a><a name="p19158445162638"></a>指标的维度，例如NAT网关的<a href="NAT网关监控指标说明.md#section102905383226">维度</a>中的nat_gateway_id。目前最大支持3个维度，从0开始；维度格式为dim.{i}=key,value，key的最大长度32，value的最大长度为256。</p>
    <p id="p8135907"><a name="p8135907"></a><a name="p8135907"></a>例如：dim.0=nat_gateway_id,6f3c6f91-4b24-4e1b-b7d1-a94ac1cb011d</p>
    </td>
    </tr>
    <tr id="row87197485314"><td class="cellrowborder" valign="top" width="21.292129212921292%" headers="mcps1.1.5.1.1 "><p id="p10961008143758"><a name="p10961008143758"></a><a name="p10961008143758"></a>timestamp</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.551555155515551%" headers="mcps1.1.5.1.2 "><p id="p15426442143758"><a name="p15426442143758"></a><a name="p15426442143758"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="18.23182318231823%" headers="mcps1.1.5.1.3 "><p id="p41582309143758"><a name="p41582309143758"></a><a name="p41582309143758"></a>字符串</p>
    </td>
    <td class="cellrowborder" valign="top" width="44.92449244924492%" headers="mcps1.1.5.1.4 "><p id="p12723881143758"><a name="p12723881143758"></a><a name="p12723881143758"></a>指定查询的时间信息，UNIX时间戳，单位毫秒。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   样例

    ```
    /V1.0/{project_id}/metadata?namespace=SYS.NAT&metric_name=snat_connection&dim.0=nat_gateway_id,bd508624-d029-47c7-b6b0-79axxxx2d93e&timestamp=1537192237457
    ```

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >错误码说明请参见[返回错误码说明](返回错误码说明.md)。  


## 请求<a name="section24112512"></a>

无

## 响应<a name="section15686020"></a>

-   要素说明

    <a name="table5969686152721"></a>
    <table><thead align="left"><tr id="row18607158152721"><th class="cellrowborder" valign="top" width="18.90810918908109%" id="mcps1.1.4.1.1"><p id="p30784793152721"><a name="p30784793152721"></a><a name="p30784793152721"></a>名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="27.68723127687231%" id="mcps1.1.4.1.2"><p id="p48461363152721"><a name="p48461363152721"></a><a name="p48461363152721"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="53.404659534046594%" id="mcps1.1.4.1.3"><p id="p33056312152721"><a name="p33056312152721"></a><a name="p33056312152721"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row60315630152721"><td class="cellrowborder" valign="top" width="18.90810918908109%" headers="mcps1.1.4.1.1 "><p id="p379942116363"><a name="p379942116363"></a><a name="p379942116363"></a>metadata</p>
    </td>
    <td class="cellrowborder" valign="top" width="27.68723127687231%" headers="mcps1.1.4.1.2 "><p id="p1279992193620"><a name="p1279992193620"></a><a name="p1279992193620"></a>字符串</p>
    </td>
    <td class="cellrowborder" valign="top" width="53.404659534046594%" headers="mcps1.1.4.1.3 "><p id="p19799321173617"><a name="p19799321173617"></a><a name="p19799321173617"></a>对应指标的元数据信息。NAT网关的元数据信息包含在top_ips中。</p>
    </td>
    </tr>
    <tr id="row33950884152721"><td class="cellrowborder" valign="top" width="18.90810918908109%" headers="mcps1.1.4.1.1 "><p id="p18799102143614"><a name="p18799102143614"></a><a name="p18799102143614"></a>top_ips</p>
    </td>
    <td class="cellrowborder" valign="top" width="27.68723127687231%" headers="mcps1.1.4.1.2 "><p id="p4799172113367"><a name="p4799172113367"></a><a name="p4799172113367"></a>数组</p>
    </td>
    <td class="cellrowborder" valign="top" width="53.404659534046594%" headers="mcps1.1.4.1.3 "><p id="p979917218366"><a name="p979917218366"></a><a name="p979917218366"></a>NAT网关的Top 10连接数IP信息。</p>
    </td>
    </tr>
    <tr id="row52817186152721"><td class="cellrowborder" valign="top" width="18.90810918908109%" headers="mcps1.1.4.1.1 "><p id="p11799122133610"><a name="p11799122133610"></a><a name="p11799122133610"></a>ip</p>
    </td>
    <td class="cellrowborder" valign="top" width="27.68723127687231%" headers="mcps1.1.4.1.2 "><p id="p979917216365"><a name="p979917216365"></a><a name="p979917216365"></a>字符串</p>
    </td>
    <td class="cellrowborder" valign="top" width="53.404659534046594%" headers="mcps1.1.4.1.3 "><p id="p137993217363"><a name="p137993217363"></a><a name="p137993217363"></a>NAT网关的IP信息。</p>
    </td>
    </tr>
    <tr id="row27056190152721"><td class="cellrowborder" valign="top" width="18.90810918908109%" headers="mcps1.1.4.1.1 "><p id="p1179992183615"><a name="p1179992183615"></a><a name="p1179992183615"></a>conn</p>
    </td>
    <td class="cellrowborder" valign="top" width="27.68723127687231%" headers="mcps1.1.4.1.2 "><p id="p14799192133618"><a name="p14799192133618"></a><a name="p14799192133618"></a>整数</p>
    </td>
    <td class="cellrowborder" valign="top" width="53.404659534046594%" headers="mcps1.1.4.1.3 "><p id="p0799142163613"><a name="p0799142163613"></a><a name="p0799142163613"></a>IP的连接个数。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   响应样例

    ```
    {
      "metadata": {
        "top_ips": [
          {
            "ip": "172.30.45.10",
            "conn": 30
          },
          {
            "ip": "172.30.45.9",
            "conn": 9
          },
          {
            "ip": "172.30.45.8",
            "conn": 8
          },
          {
            "ip": "172.30.45.7",
            "conn": 7
          },
          {
            "ip": "172.30.45.6",
            "conn": 6
          },
          {
            "ip": "172.30.45.5",
            "conn": 5
          },
          {
            "ip": "172.30.45.4",
            "conn": 4
          },
          {
            "ip": "172.30.45.3",
            "conn": 3
          },
          {
            "ip": "172.30.45.2",
            "conn": 2
          },
          {
            "ip": "172.30.45.1",
            "conn": 1
          }
        ]
      }
    }
    ```


## 返回值<a name="section6956456"></a>

-   正常

    200

-   异常

    <a name="zh-cn_topic_0020098248_table46793998"></a>
    <table><thead align="left"><tr id="zh-cn_topic_0020098248_row65573909"><th class="cellrowborder" valign="top" width="61.839999999999996%" id="mcps1.1.3.1.1"><p id="zh-cn_topic_0020098248_p9886408"><a name="zh-cn_topic_0020098248_p9886408"></a><a name="zh-cn_topic_0020098248_p9886408"></a>返回值</p>
    </th>
    <th class="cellrowborder" valign="top" width="38.16%" id="mcps1.1.3.1.2"><p id="zh-cn_topic_0020098248_p62601592"><a name="zh-cn_topic_0020098248_p62601592"></a><a name="zh-cn_topic_0020098248_p62601592"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="zh-cn_topic_0020098248_row37564172"><td class="cellrowborder" valign="top" width="61.839999999999996%" headers="mcps1.1.3.1.1 "><p id="zh-cn_topic_0020098248_p22799085"><a name="zh-cn_topic_0020098248_p22799085"></a><a name="zh-cn_topic_0020098248_p22799085"></a>400 Bad Request</p>
    </td>
    <td class="cellrowborder" valign="top" width="38.16%" headers="mcps1.1.3.1.2 "><p id="zh-cn_topic_0020098248_p44643603"><a name="zh-cn_topic_0020098248_p44643603"></a><a name="zh-cn_topic_0020098248_p44643603"></a>请求错误。</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0020098248_row66248115"><td class="cellrowborder" valign="top" width="61.839999999999996%" headers="mcps1.1.3.1.1 "><p id="zh-cn_topic_0020098248_p64497130"><a name="zh-cn_topic_0020098248_p64497130"></a><a name="zh-cn_topic_0020098248_p64497130"></a>401 Unauthorized</p>
    </td>
    <td class="cellrowborder" valign="top" width="38.16%" headers="mcps1.1.3.1.2 "><p id="zh-cn_topic_0020098248_p42202994"><a name="zh-cn_topic_0020098248_p42202994"></a><a name="zh-cn_topic_0020098248_p42202994"></a>未提供认证信息，或认证信息错。</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0020098248_row44282627"><td class="cellrowborder" valign="top" width="61.839999999999996%" headers="mcps1.1.3.1.1 "><p id="zh-cn_topic_0020098248_p30123063"><a name="zh-cn_topic_0020098248_p30123063"></a><a name="zh-cn_topic_0020098248_p30123063"></a>403 Forbidden</p>
    </td>
    <td class="cellrowborder" valign="top" width="38.16%" headers="mcps1.1.3.1.2 "><p id="zh-cn_topic_0020098248_p15114764"><a name="zh-cn_topic_0020098248_p15114764"></a><a name="zh-cn_topic_0020098248_p15114764"></a>请求页面被禁止访问。</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0020098248_row1815156"><td class="cellrowborder" valign="top" width="61.839999999999996%" headers="mcps1.1.3.1.1 "><p id="zh-cn_topic_0020098248_p12809933"><a name="zh-cn_topic_0020098248_p12809933"></a><a name="zh-cn_topic_0020098248_p12809933"></a>408 Request Timeout</p>
    </td>
    <td class="cellrowborder" valign="top" width="38.16%" headers="mcps1.1.3.1.2 "><p id="zh-cn_topic_0020098248_p10309404"><a name="zh-cn_topic_0020098248_p10309404"></a><a name="zh-cn_topic_0020098248_p10309404"></a>请求超出了服务器的等待时间。</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0020098248_row25675773"><td class="cellrowborder" valign="top" width="61.839999999999996%" headers="mcps1.1.3.1.1 "><p id="zh-cn_topic_0020098248_p66471715"><a name="zh-cn_topic_0020098248_p66471715"></a><a name="zh-cn_topic_0020098248_p66471715"></a>429 Too Many Requests</p>
    </td>
    <td class="cellrowborder" valign="top" width="38.16%" headers="mcps1.1.3.1.2 "><p id="zh-cn_topic_0020098248_p5281111"><a name="zh-cn_topic_0020098248_p5281111"></a><a name="zh-cn_topic_0020098248_p5281111"></a>当前请求过多。</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0020098248_row47530006"><td class="cellrowborder" valign="top" width="61.839999999999996%" headers="mcps1.1.3.1.1 "><p id="zh-cn_topic_0020098248_p24725298"><a name="zh-cn_topic_0020098248_p24725298"></a><a name="zh-cn_topic_0020098248_p24725298"></a>500 Internal Server Error</p>
    </td>
    <td class="cellrowborder" valign="top" width="38.16%" headers="mcps1.1.3.1.2 "><p id="zh-cn_topic_0020098248_p39567352"><a name="zh-cn_topic_0020098248_p39567352"></a><a name="zh-cn_topic_0020098248_p39567352"></a>请求未完成，服务异常。</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0020098248_row20561848"><td class="cellrowborder" valign="top" width="61.839999999999996%" headers="mcps1.1.3.1.1 "><p id="zh-cn_topic_0020098248_p54897010"><a name="zh-cn_topic_0020098248_p54897010"></a><a name="zh-cn_topic_0020098248_p54897010"></a>503 Service Unavailable</p>
    </td>
    <td class="cellrowborder" valign="top" width="38.16%" headers="mcps1.1.3.1.2 "><p id="zh-cn_topic_0020098248_p1451523117958"><a name="zh-cn_topic_0020098248_p1451523117958"></a><a name="zh-cn_topic_0020098248_p1451523117958"></a>系统暂时不可用，请求受限。</p>
    </td>
    </tr>
    </tbody>
    </table>


